install (FILES callbacks.h chunk.h events.h stats.h DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/${CURRENT_INCLUDEDIR}")
set (LOCAL_SOURCES
    ${CMAKE_CURRENT_SOURCE_DIR}/callbacks.c
    ${CMAKE_CURRENT_SOURCE_DIR}/chunk.c
    ${CMAKE_CURRENT_SOURCE_DIR}/events.c
    ${CMAKE_CURRENT_SOURCE_DIR}/stats.c
)

if (${TRALLOC_THREADS})
    install (FILES threads.h DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/${CURRENT_INCLUDEDIR}")
    set (LOCAL_SOURCES ${LOCAL_SOURCES}
        ${CMAKE_CURRENT_SOURCE_DIR}/threads.c
    )
endif()

set (SOURCES ${SOURCES} ${LOCAL_SOURCES} PARENT_SCOPE)
