set (LOCAL_SOURCES)

install (FILES string.h DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/${CURRENT_INCLUDEDIR}")

if (${TRALLOC_DESTRUCTOR})
    install (FILES file.h DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/${CURRENT_INCLUDEDIR}")
    set (LOCAL_SOURCES ${LOCAL_SOURCES} ${CMAKE_CURRENT_SOURCE_DIR}/file.c)
endif()

if (${TRALLOC_EXTENSIONS})
    install (FILES string/extensions.h DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/${CURRENT_INCLUDEDIR}")
    set (LOCAL_SOURCES ${LOCAL_SOURCES} ${CMAKE_CURRENT_SOURCE_DIR}/string/extensions.c)
else ()
    install (FILES string/pure.h DESTINATION "${CMAKE_INSTALL_INCLUDEDIR}/${CURRENT_INCLUDEDIR}")
    set (LOCAL_SOURCES ${LOCAL_SOURCES} ${CMAKE_CURRENT_SOURCE_DIR}/string/pure.c)
endif()

set (SOURCES ${SOURCES} ${LOCAL_SOURCES} PARENT_SCOPE)